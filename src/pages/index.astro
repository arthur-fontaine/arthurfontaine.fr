---
import { comingSoonClass, sectionClass, seeMoreWorkClass } from "../styles/pages/index.css";

import Layout from "../layouts/Layout/Layout.astro";

import Work from "../components/Work/Work.astro";

import projects from "../../data/projects.json";
import about from "../../data/about.json";
---

<Layout
	title="Arthur Fontaine"
	description={about.content}
>
	<section class={sectionClass}>
		<h2>About me</h2>

		{
			about.content.split("\n").map((paragraph) => (
				paragraph.length > 0 && <p>{paragraph}</p>
			))
		}
	</section>

	<section class={sectionClass}>
		<h2>Blog</h2>

		<p class={comingSoonClass}>
			Coming soon<span class="blog__dots">...</span>
		</p>

		<script>
			// Animate three dots
			const dots = document.querySelector(".blog__dots");
			if (!dots) {
				throw new Error("No dots found");
			}
			let dotsCount = 0;

			setInterval(() => {
				dotsCount = (dotsCount + 1) % 4;
				dots.textContent = ".".repeat(dotsCount);
			}, 500);
		</script>
	</section>

	<section class={sectionClass}>
		<h2>My featured work</h2>

		{
			projects.projects.map((project) => (
				<article>
					<Work project={project} />
				</article>
			))
		}

		<a href="https://github.com/arthur-fontaine/?tab=repositories" class={seeMoreWorkClass} target="_blank" rel="noopener noreferrer">
			See more projects on GitHub
		</a>
	</section>
</Layout>
